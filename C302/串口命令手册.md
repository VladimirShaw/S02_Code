# Arduino Template 串口命令手册

## 基本说明
- 波特率：115200
- 命令以回车结尾
- 大小写敏感

---

## PWM控制命令

### 简化PWM命令
```
p24 128        # 设置引脚24的PWM值为128 (0-255)
p24 0          # 关闭引脚24的PWM
s24            # 停止引脚24的PWM
```

### 简化呼吸命令
```
b24 1000       # 引脚24开始呼吸效果，周期1000ms
```

### 简化渐变命令
```
f24 1000       # 引脚24渐入到最亮，用时1000ms
fo24 1000      # 引脚24渐出到0，用时1000ms
ft24 128 1000  # 引脚24渐变到128，用时1000ms
fs24           # 停止引脚24的渐变
```

### 批量PWM命令（连续10个引脚）
```
pa20 128       # 引脚20-29批量设置PWM为128
ba10 1000      # 引脚10-19批量呼吸效果，周期1000ms
sa20           # 引脚20-29批量停止
```

### 完整PWM命令
```
pwm_set:24,128                    # 设置引脚24的PWM值为128
pwm_breathing:24,1000             # 引脚24呼吸效果，周期1000ms
pwm_stop:24                       # 停止引脚24的PWM
pwm_stop_all                      # 停止所有PWM
```

### 完整渐变命令
```
pwm_fadein:24,255,1000            # 引脚24渐入到255，用时1000ms
pwm_fadeout:24,1000               # 引脚24渐出到0，用时1000ms
pwm_fadeto:24,128,1000            # 引脚24渐变到128，用时1000ms
pwm_stop_fade:24                  # 停止引脚24的渐变
```

---

## 数字IO控制命令

### 基础数字输出
```
o24h           # 引脚24输出高电平
o24l           # 引脚24输出低电平
```

### 脉冲输出
```
pulse24:1000   # 引脚24输出1000ms脉冲
```

### 定时输出
```
t24h:500:2000  # 引脚24延迟500ms后输出高电平，持续2000ms
t24l:500:2000  # 引脚24延迟500ms后输出低电平，持续2000ms
```

### 输入监控
```
i25            # 监控引脚25的输入状态
```

---

## 游戏控制命令

### 基础游戏命令
```
INIT           # 初始化游戏
START          # 开始游戏
STOP           # 停止游戏
PAUSE          # 暂停游戏
RESUME         # 恢复游戏
```

### 环节测试命令
```
072-0          # 启动环节072-0 (引脚24亮起)
072-0.5        # 启动环节072-0.5 (引脚26亮起)
072-4          # 启动环节072-4 (引脚28亮起)
```

### 手动协议发送
```
send_init      # 发送初始化命令
send_start     # 发送开始命令
send_stop      # 发送停止命令
send_pause     # 发送暂停命令
send_resume    # 发送恢复命令
send_emergency # 发送紧急停止命令
```

---

## 网络命令 (需要ENABLE_NETWORK=true)

### 网络状态
```
network        # 查看网络连接状态
```

### 发送消息
```
send Hello     # 发送消息到服务器
```

---

## 系统命令

### 帮助和状态
```
help           # 显示帮助信息
h              # 显示帮助信息（简写）
status         # 显示系统状态
```

### 系统控制
```
reset          # 重置系统
debug          # 显示调试信息
time           # 显示系统时间
```

### 停止所有输出
```
pwm_stop_all   # 停止所有PWM输出
dio_stop_all   # 停止所有数字IO输出
```

### 状态查询
```
dio_status     # 查看数字IO状态
```

---

## 命令格式说明

### 引脚号
- 支持任意数字引脚号，如：24, 26, 28, 30等

### PWM值
- 范围：0-255
- 0 = 完全关闭
- 255 = 最亮/最大

### 时间
- 单位：毫秒(ms)
- 例如：1000 = 1秒

### 环节名称
- 格式：任意字符串
- 例如：072-4, 073-1, START, END等

### 会话ID
- 格式：任意字符串
- 例如：ABC123, SESSION_001等

---

## 使用示例

### 1. 简单LED控制
```
p24 255        # LED全亮
p24 128        # LED半亮
p24 0          # LED关闭
s24            # 停止LED
```

### 2. 渐变效果
```
f24 2000       # LED渐亮，用时2秒
fo24 2000      # LED渐暗，用时2秒
ft24 128 1000  # LED渐变到半亮，用时1秒
fs24           # 停止渐变
```

### 3. 呼吸效果
```
b24 2000       # 开始呼吸，周期2秒
s24            # 停止呼吸
```

### 4. 数字输出控制
```
o26h           # 继电器开启
o26l           # 继电器关闭
pulse30:500    # 蜂鸣器响500ms
```

### 5. 游戏流程控制
```
INIT               # 初始化游戏
START              # 开始游戏
PAUSE              # 暂停游戏
RESUME             # 恢复游戏
STOP               # 停止游戏
status             # 查看当前状态
```

---

## 注意事项

1. **命令大小写敏感**：`p24 128` ✓，`P24 128` ✗
2. **数字不要加前导零**：`p24 128` ✓，`p024 128` ✗
3. **参数用空格分隔**：`p24 128` ✓，`p24,128` ✗（简化命令）
4. **完整命令用冒号和逗号**：`pwm_set:24,128` ✓
5. **网络命令需要网络功能开启**
6. **批量命令作用于连续10个引脚**：`pa20 128` 影响引脚20-29
7. **时间单位为毫秒**：1000 = 1秒 